package malwaretd;

import java.util.List;

import jgame.Context;
import jgame.GObject;
import jgame.GSprite;
import jgame.ImageCache;
import jgame.SoundManager;
import jgame.listener.HitTestListener;
import malwaretd.MalwareTDApplet.View;

public class Goal extends GSprite {

	int ScrewYouStefan = 0;

	public Goal() {

		super(ImageCache.forClass(MalwareTD.class).get("goal.png"));
		// Set the size.
		setSize(50, 31);
		setAnchorCenter();

		HitTestListener htl2 = new HitTestListener(Enemy.class) {
			@Override
			public void invoke(GObject target, Context context) {
				List<Enemy> list = context.hitTestClass(Enemy.class);
				for (Enemy e : list) {
					e.removeSelf();
				}
				ScrewYouStefan++;
				System.out.println(ScrewYouStefan);
				if (ScrewYouStefan >= 10) {
					SoundManager.forClass(MalwareTD.class).play("dead.wav");
					context.setCurrentGameView(View.GAME_OVER);
				}
			}

		};
		addListener(htl2);
	}
}
