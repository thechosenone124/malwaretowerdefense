package malwaretd;

import java.util.ArrayList;

import jgame.GContainer;
import jgame.GSprite;
import jgame.ImageCache;
import jgame.listener.TimerListener;

public class GameView extends GContainer {
	public GameView() {

		super(new GSprite(ImageCache.forClass(MalwareTD.class).get(
				"/Background1.png")));
		// Set the size.
		setSize(640, 480);
		Enemy1 virus = new Enemy1();
		Enemy2 worm = new Enemy2();
		Enemy3 trojan = new Enemy3();
		TimerListener virusmaker = new TimerListener((int)(virus.getSpawnRate()*30)) {
			@Override
			public void invoke(jgame.GObject target, jgame.Context context) {
				Enemy1 virus = new Enemy1();
				ArrayList<Enemy1> list = new ArrayList<Enemy1>();
				list.add(virus);
				addAt(virus, 1000, 1000);
				setInterval((int) (virus.getSpawnRate()*30));

			}

		};

		TimerListener wormmaker = new TimerListener((int) (worm.getSpawnRate()*30)) {
			@Override
			public void invoke(jgame.GObject target, jgame.Context context) {
				Enemy2 worm = new Enemy2();
				ArrayList<Enemy2> list = new ArrayList<Enemy2>();
				list.add(worm);
				addAt(worm, 1000, 1000);
				setInterval((int) (worm.getSpawnRate()*30));
			}
		};
		
		TimerListener trojanmaker = new TimerListener(trojan.getSpawnRate()*30) {
			@Override
			public void invoke(jgame.GObject target, jgame.Context context) {
				Enemy3 trojan = new Enemy3();
				ArrayList<Enemy3> list = new ArrayList<Enemy3>();
				list.add(trojan);
				addAt(trojan, 1000, 1000);
				setInterval( (int) (Math.round(trojan.getSpawnRate()*30*.51)));
			}
		};
		addListener(virusmaker);
		addListener(wormmaker);
		addListener(trojanmaker);
	}
}
